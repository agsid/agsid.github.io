<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Allied Work</title>
    <link rel="icon" type="image/x-icon" href="./images/logo.png">
    <!-- Link to Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Link to Ion Icons -->
    <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
    <!-- Link to Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&family=Roboto:wght@400;500;700&family=Roboto+Mono:400&display=swap" rel="stylesheet">
    <!-- Link to your custom CSS file -->
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="app-container">
        <!-- Placeholder for header content that was previously loaded by header.html -->
        <!-- You can replace this with the actual content of your header.html if available -->
        <header class="absolute top-0 left-0 right-0 h-20 bg-[var(--bg-secondary)] flex items-center justify-between px-8 shadow-lg z-20 rounded-t-xl">
            <div class="text-[var(--text-heading-main)] text-2xl font-bold">
                Allied Algorithms
            </div>
            <nav>
                <!-- Add your navigation links here if needed -->
            </nav>
        </header>

        <div id="settings-dropdown" class="relative">
            <button id="settings-toggle" aria-label="Settings" class="p-2 rounded-full shadow-md transition-all duration-300 ease-in-out">
                <ion-icon name="ellipsis-vertical-outline" class="text-xl"></ion-icon>
            </button>
            <div id="settings-menu" class="absolute hidden bg-[var(--bg-secondary)] border border-[var(--border-color)] rounded-md shadow-lg py-2 mt-2 right-0 min-w-[180px]">
                <button id="theme-mode-toggle">
                    <ion-icon name="moon-outline"></ion-icon>
                    <span>Dark Mode</span>
                </button>
            </div>
        </div>

        <!-- In-App Tab Header -->
        <div id="tab-header">
            <button class="tab-button active" data-tab-target="tab-content-editor">Code Editor</button>
            <button class="tab-button" data-tab-target="tab-content-specification">Robot Specification</button>
            <button class="tab-button" data-tab-target="tab-content-commands">Available Commands</button>
        </div>
    
        <div id="main-content-area">
            <div id="tab-content-editor" class="tab-content active">
                <div id="editor-panel" class="flex flex-col">
                    <h1 class="text-3xl font-bold mb-6 text-center flex items-center justify-center">
                        <img src="https://placehold.co/40x40/0f766e/ffffff?text=AA" alt="Allied Algorithms Logo" class="h-10 w-auto mr-4 rounded-full">
                        FLL Bot Programmer
                    </h1>

                    <div class="code-editor-container flex-grow">
                        <div id="highlight-overlay"></div> <!-- Highlight Overlay -->
                        <textarea id="code-editor" class="w-full" spellcheck="false" placeholder="Type your commands here...">
// Welcome to Allied Algorithms FLL Bot Programmer!
// Use the commands on the 'Available Commands' tab to control your robot.

print_message("Initializing robot on the field...")
// Robot starts at the center of the bottom edge of the field, facing up.
// Let's program it to navigate to a specific mission area.

set_drive_speed(60) // Set a moderate driving speed
drive(30)           // Drive 30 inches forward (upwards)
turn(90)            // Turn 90 degrees clockwise (robot now faces right)
wait(1000)          // Wait for 1 second for the arm to complete action
display_message("Robot completed mission segment!")
                        </textarea>
                    </div>

                    <div class="flex flex-col sm:flex-row justify-center space-y-4 sm:space-y-0 sm:space-x-4 mb-6">
                        <button id="run-button" class="button">
                            <svg class="w-5 h-5 inline-block" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.752 11.168l-3.197 2.132A1 1 0 0110 13.132V9.868c0-.836.828-1.309 1.402-.868l3.197 2.132a1 1 0 010 1.736z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                            Run Code
                        </button>
                        <button id="reset-button" class="button">
                            <ion-icon name="refresh-outline"></ion-icon>
                            Reset
                        </button>
                        <button id="copy-button" class="button">
                            <svg class="w-5 h-5 inline-block" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M17 17h.01"></path></svg>
                            Copy Python Code
                        </button>
                    </div>

                    <h3 class="text-xl font-semibold mb-2">Generated Python Code:</h3>
                    <textarea id="python-code-display" class="w-full p-4" readonly placeholder="Click 'Copy Python Code' to see the generated script here."></textarea>

                    <div class="mt-6 text-center">
                        <button id="upload-button" class="button">
                            <ion-icon name="cloud-upload-outline"></ion-icon>
                            Upload Code
                        </button>
                        <input type="file" id="file-upload" accept=".txt,.py" class="hidden">
                    </div>
                </div>

                <div id="simulation-panel" class="flex flex-col items-center">
                    <h2 class="text-2xl font-bold mb-6 text-center">Bot Simulation</h2>
                    <div class="flex justify-center items-center flex-grow w-full">
                        <canvas id="robot-canvas"></canvas>
                    </div>
                    <!-- New Buttons for Starting Positions -->
                    <div class="flex justify-center space-x-4 mt-6">
                        <button id="start-left-button" class="button">
                            <ion-icon name="arrow-back-outline"></ion-icon>
                            Start from Left
                        </button>
                        <button id="start-right-button" class="button">
                            <ion-icon name="arrow-forward-outline"></ion-icon>
                            Start from Right
                        </button>
                    </div>
                    <h3 class="text-xl font-semibold mt-6 mb-2">Console Output:</h3>
                    <div id="console-output" class="w-full"></div>
                </div>
            </div>

            <!-- New Robot Specification Tab Content -->
            <div id="tab-content-specification" class="tab-content p-6">
                <div class="max-w-2xl mx-auto bg-[var(--bg-secondary)] p-8 rounded-lg shadow-md border border-[var(--border-color)]">
                    <h2 class="text-2xl font-bold mb-6 text-center">Robot Specifications</h2>
                    <p class="mb-8 text-center text-[var(--text-primary)]">Define your robot's physical characteristics to ensure accurate simulation and code generation.</p>

                    <div class="form-group">
                        <label for="wheel-diameter">Wheel Diameter (inches):</label>
                        <input type="number" id="wheel-diameter" value="" step="0.1" min="0.1" class="w-full">
                    </div>

                    <div class="form-group">
                        <label for="motor-degrees-per-rotation">The angle (in degrees) the robot turns when only one wheel moves:</label>
                        <input type="number" id="motor-degrees-per-rotation" value="" step="1" min="1" class="w-full">
                    </div>

                    <div class="form-group">
                        <label for="left-motor-port">Left Motor Port:</label>
                        <select id="left-motor-port" class="w-full">
                            <option value="B">B</option>
                            <option value="A">A</option>
                            <option value="C">C</option>
                            <option value="D">D</option>
                            <option value="E">E</option>
                            <option value="F">F</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="right-motor-port">Right Motor Port:</label>
                        <select id="right-motor-port" class="w-full">
                            <option value="C">C</option>
                            <option value="A">A</option>
                            <option value="B">B</option>
                            <option value="D">D</option>
                            <option value="E">E</option>
                            <option value="F">F</option>
                        </select>
                    </div>

                    <p class="mt-8 text-center text-[var(--text-inactive-tab)]">These settings will influence how <code class="font-mono">drive()</code> and <code class="font-mono">turn()</code> commands translate to motor actions in the generated Python code.</p>
                </div>
            </div>

            <div id="tab-content-commands" class="tab-content">
                <div class="p-6 flex-grow flex flex-col">
                    <h2 class="text-2xl font-bold mb-4 text-center">Available Commands</h2>
                    <p class="mb-6 text-center">These are the commands you can use to program your FLL bot. Distances are in <b>inches</b>, angles in <b>degrees</b>, and time in <b>milliseconds</b>.</p>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 flex-grow">
                        <!-- Drive Commands Section -->
                        <div class="commands-section">
                            <h3><ion-icon name="caret-forward-outline" class="mr-2"></ion-icon>Drive Commands</h3>
                            <ul>
                                <li><code class="font-mono">drive(distance)</code>: Move the robot forward or backward.
                                    <br><span class="text-gray-500 ml-4">Example: <code class="font-mono">drive(24)</code> moves 24 inches forward. Negative values move backward.</span></li>
                                <li><code class="font-mono">turn(degrees)</code>: Rotate the robot clockwise or counter-clockwise.
                                    <br><span class="text-gray-500 ml-4">Example: <code class="font-mono">turn(90)</code> turns 90 degrees clockwise. Negative values turn counter-clockwise.</span></li>
                                <li><code class="font-mono">set_drive_speed(speed)</code>: Set the robot's driving and turning speed (0-100).
                                    <br><span class="text-gray-500 ml-4">Example: <code class="font-mono">set_drive_speed(75)</code> sets speed to 75%.</span></li>
                            </ul>
                        </div>

                        <!-- Motor Commands Section (Modified) -->
                        <div class="commands-section">
                            <h3><ion-icon name="construct-outline" class="mr-2"></ion-icon>Motor Commands</h3>
                            <ul>
                                <li><code class="font-mono">set_motor_power(port, power)</code>: Control a general motor's power (0-100) for a given port ('A','B','C','D','E','F').
                                    <br><span class="text-gray-500 ml-4">Example: <code class="font-mono">set_motor_power('B', 60)</code> sets motor 'B' to 60% power.</span></li>
                                <li><code class="font-mono">stop_motor(port)</code>: Stop a specific general motor.
                                    <br><span class="text-gray-500 ml-4">Example: <code class="font-mono">stop_motor('B')</code> stops motor 'B'.</span></li>
                            </ul>
                        </div>

                        <!-- Utility & Communication Commands Section -->
                        <div class="commands-section">
                            <h3><ion-icon name="hammer-outline" class="mr-2"></ion-icon>Utility & Communication Commands</h3>
                            <ul>
                                <li><code class="font-mono">wait(milliseconds)</code>: Pause code execution for a specified duration.
                                    <br><span class="text-gray-500 ml-4">Example: <code class="font-mono">wait(1000)</code> pauses for 1 second.</span></li>
                                <li><code class="font-mono">display_message("Text")</code>: Show a custom message in the simulation console.
                                    <br><span class="text-gray-500 ml-4">Example: <code class="font-mono">display_message("Mission accomplished!")</code></span></li>
                                <li><code class="font-mono">print_message("Text")</code>: Alias for `display_message`.</li>
                            </ul>
                        </div>

                        <!-- General Notes Section -->
                        <div class="commands-section">
                            <h3><ion-icon name="information-circle-outline" class="mr-2"></ion-icon>General Notes</h3>
                            <ul>
                                <li><code class="font-mono">// Your Comment</code>: Use double slashes for single-line comments in your code. They are converted to Python's <code class="font-mono">#</code> comments.</li>
                                <li>The simulation field is 96x48 inches. The robot starts at (48, 24).</li>
                                <li>Robot direction: 0 degrees is facing right, 90 degrees is facing up.</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <footer class="bg-gray-900 text-gray-300 py-8 px-4 md:px-8 shadow-inner rounded-b-lg">
            <div class="max-w-7xl mx-auto grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-8 text-center md:text-left">
                <div class="col-span-1 md:col-span-1 lg:col-span-1">
                    <h3 class="text-xl font-semibold text-white mb-4">Official Resources</h3>
                    <ul class="space-y-2 text-sm">
                        <li><a href="https://www.firstlegoleague.org/" target="_blank" rel="noopener noreferrer" class="hover:text-white transition duration-300 ease-in-out rounded-md p-1 block">FIRST LEGO League Official Site</a></li>
                        <li><a href="https://www.firstinspires.org/" target="_blank" rel="noopener noreferrer" class="hover:text-white transition duration-300 ease-in-out rounded-md p-1 block">FIRST Robotics Official Site</a></li>
                        <li><a href="https://youtu.be/exWkcUBS0j8?si=oZ2BRTdK8B6WXpFX" target="blank" class="hover:text-white transition duration-300 ease-in-out rounded-md p-1 block">FLL Challenge 25</a></li>
                    </ul>
                </div>

                <div class="col-span-1 md:col-span-1 lg:col-span-1">
                    <h3 class="text-xl font-semibold text-white mb-4">Connect With Us</h3>
                    <p class="text-sm mb-4">Email: <a target="blank"href="mailto:alliedalgorithms@gmail.com" class="hover:text-white transition duration-300 ease-in-out">alliedalgorithms@gmail.com</a></p>
                    <div class="flex justify-center md:justify-start space-x-4">
                        <a href="#" class="text-gray-400 hover:text-white transition duration-300 ease-in-out text-2xl" aria-label="Facebook"><i class="fab fa-facebook"></i></a>
                        <a href="#" class="text-gray-400 hover:text-white transition duration-300 ease-in-out text-2xl" aria-label="Twitter"><i class="fab fa-twitter"></i></a>
                        <a href="#" class="text-gray-400 hover:text-white transition duration-300 ease-in-out text-2xl" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
                        <a href="#" class="text-gray-400 hover:text-white transition duration-300 ease-in-out text-2xl" aria-label="YouTube"><i class="fab fa-youtube"></i></a>
                    </div>
                </div>
            </div>

            <div class="border-t border-gray-700 mt-8 pt-6 text-center text-sm text-gray-500">
                &copy; 2025 Allied Algorithms. All rights reserved. | Powered by LEGO Education & FIRST
            </div>
        </footer>
    </div>

    <div id="message-box" class="message-box"></div>

    <!-- Upload/Paste Code Modal -->
    <div id="upload-modal-overlay" class="modal-overlay">
        <div class="modal-content">
            <button id="modal-close-button" class="modal-close-button">&times;</button>
            <h3>Upload or Paste Code</h3>
            <button id="modal-upload-file-button" class="button">
                <ion-icon name="document-text-outline"></ion-icon>
                Upload from File
            </button>
            <textarea id="paste-code-textarea" placeholder="Or paste your Python code here..."></textarea>
            <button id="modal-paste-code-button" class="button">
                <ion-icon name="clipboard-outline"></ion-icon>
                Paste Code
            </button>
        </div>
    </div>

    <!-- Link to your JavaScript file. It's best practice to put script tags at the end of the body for performance. -->
    <script src="script.js"></script>
</body>
</html>

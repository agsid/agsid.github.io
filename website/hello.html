<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Path Game</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
        }
        canvas {
            background-color: #ffffff;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        /* New styles for the resizable console */
        .resizer-handle {
            height: 8px;
            background-color: #d1d5db; /* A subtle gray for the handle */
            cursor: ns-resize; /* North-south resize cursor */
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.2s ease-in-out;
        }
        .resizer-handle:hover {
            background-color: #9ca3af; /* Darker on hover */
        }
    </style>
</head>
<body class="bg-gray-100 flex items-center justify-center min-h-screen p-4">

    <div class="bg-white p-6 rounded-2xl shadow-xl max-w-lg w-full">
        <h1 class="text-3xl font-bold text-gray-800 mb-4 text-center">Path Game</h1>
        <p class="text-gray-600 mb-6 text-center">Draw a path and watch the square move!</p>

        <canvas id="gameCanvas" class="w-full h-96 border border-gray-300 rounded-lg mb-4"></canvas>

        <div class="flex flex-col sm:flex-row gap-4 mb-4">
            <div class="flex-1">
                <label for="steps" class="block text-sm font-medium text-gray-700 mb-1">Add a path segment:</label>
                <div class="flex rounded-md shadow-sm">
                    <input type="text" id="steps" class="flex-1 block w-full rounded-l-md border-gray-300 px-3 py-2 focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm" placeholder="e.g., U, D, L, R">
                    <button id="addPathBtn" class="bg-indigo-600 hover:bg-indigo-700 text-white font-semibold py-2 px-4 rounded-r-md transition-colors duration-200 ease-in-out">
                        Add
                    </button>
                </div>
                <p class="mt-2 text-sm text-gray-500">Use U (Up), D (Down), L (Left), R (Right) to draw a path.</p>
            </div>
            
            <div class="flex-1">
                <label for="size" class="block text-sm font-medium text-gray-700 mb-1">Square size (10-50):</label>
                <input type="range" id="size" min="10" max="50" value="20" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer">
            </div>
        </div>

        <div class="flex flex-wrap justify-center gap-4 mb-4">
            <button id="startLeftBtn" class="flex-1 sm:flex-none bg-emerald-500 hover:bg-emerald-600 text-white font-semibold py-2 px-4 rounded-full shadow-md transition-all duration-200 ease-in-out transform hover:scale-105 active:scale-95">
                Start from Left
            </button>
            <button id="startRightBtn" class="flex-1 sm:flex-none bg-gray-300 hover:bg-gray-400 text-gray-800 font-semibold py-2 px-4 rounded-full shadow-md transition-all duration-200 ease-in-out transform hover:scale-105 active:scale-95">
                Start from Right
            </button>
        </div>

        <div class="flex justify-center gap-4">
            <button id="playBtn" class="flex-1 sm:flex-none bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-6 rounded-full shadow-lg transition-all duration-200 ease-in-out transform hover:scale-105 active:scale-95">
                Play
            </button>
            <button id="resetBtn" class="flex-1 sm:flex-none bg-red-500 hover:bg-red-600 text-white font-bold py-2 px-6 rounded-full shadow-lg transition-all duration-200 ease-in-out transform hover:scale-105 active:scale-95">
                Reset
            </button>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const canvas = document.getElementById('gameCanvas');
            const ctx = canvas.getContext('2d');
            const addPathBtn = document.getElementById('addPathBtn');
            const playBtn = document.getElementById('playBtn');
            const resetBtn = document.getElementById('resetBtn');
            const startLeftBtn = document.getElementById('startLeftBtn');
            const startRightBtn = document.getElementById('startRightBtn');
            const stepsInput = document.getElementById('steps');
            const sizeInput = document.getElementById('size');
            
            let path = [];
            let square = { x: 0, y: 0, size: 20 };
            let pathIndex = 0;
            let animationFrameId = null;
            let startFromLeft = true;

            const updateButtonStyles = () => {
                if (startFromLeft) {
                    startLeftBtn.classList.remove('bg-gray-300', 'hover:bg-gray-400', 'text-gray-800');
                    startLeftBtn.classList.add('bg-emerald-500', 'hover:bg-emerald-600', 'text-white');
                    startRightBtn.classList.remove('bg-emerald-500', 'hover:bg-emerald-600', 'text-white');
                    startRightBtn.classList.add('bg-gray-300', 'hover:bg-gray-400', 'text-gray-800');
                } else {
                    startRightBtn.classList.remove('bg-gray-300', 'hover:bg-gray-400', 'text-gray-800');
                    startRightBtn.classList.add('bg-emerald-500', 'hover:bg-emerald-600', 'text-white');
                    startLeftBtn.classList.remove('bg-emerald-500', 'hover:bg-emerald-600', 'text-white');
                    startLeftBtn.classList.add('bg-gray-300', 'hover:bg-gray-400', 'text-gray-800');
                }
            };
            
            const setupCanvas = () => {
                const rect = canvas.parentNode.getBoundingClientRect();
                canvas.width = rect.width;
                canvas.height = rect.height;
                resetGame();
            };

            const drawPath = () => {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                if (path.length > 0) {
                    ctx.beginPath();
                    ctx.moveTo(path[0].x, path[0].y);
                    path.forEach(point => ctx.lineTo(point.x, point.y));
                    ctx.lineWidth = 4;
                    ctx.strokeStyle = '#6366f1';
                    ctx.stroke();
                }
            };

            const drawSquare = () => {
                ctx.fillStyle = '#10b981';
                ctx.fillRect(square.x - square.size / 2, square.y - square.size / 2, square.size, square.size);
            };

            const updateSquarePosition = () => {
                if (path.length === 0) return;

                const currentPoint = path[pathIndex];
                if (!currentPoint) return;

                square.x = currentPoint.x;
                square.y = currentPoint.y;
            };

            const gameLoop = () => {
                drawPath();
                drawSquare();

                if (path.length > 0) {
                    if (startFromLeft) {
                        pathIndex++;
                        if (pathIndex >= path.length) {
                            cancelAnimationFrame(animationFrameId);
                            return;
                        }
                    } else {
                        pathIndex--;
                        if (pathIndex < 0) {
                            cancelAnimationFrame(animationFrameId);
                            return;
                        }
                    }
                    updateSquarePosition();
                }

                animationFrameId = requestAnimationFrame(gameLoop);
            };

            const addPathSegments = (segments) => {
                const lastPoint = path.length > 0 ? path[path.length - 1] : { x: canvas.width / 2, y: canvas.height / 2 };
                let currentX = lastPoint.x;
                let currentY = lastPoint.y;

                segments.toUpperCase().split('').forEach(segment => {
                    const step = 20;
                    switch (segment) {
                        case 'U': currentY -= step; break;
                        case 'D': currentY += step; break;
                        case 'L': currentX -= step; break;
                        case 'R': currentX += step; break;
                    }
                    path.push({ x: currentX, y: currentY });
                });
                drawPath();
                updateSquarePosition();
            };

            const resetGame = () => {
                cancelAnimationFrame(animationFrameId);
                path = [];
                pathIndex = 0;
                square.x = canvas.width / 2;
                square.y = canvas.height / 2;
                drawPath();
                drawSquare();
            };
            
            // Event Listeners
            addPathBtn.addEventListener('click', () => {
                const steps = stepsInput.value;
                if (steps) {
                    addPathSegments(steps);
                    stepsInput.value = '';
                }
            });

            playBtn.addEventListener('click', () => {
                cancelAnimationFrame(animationFrameId);
                if (path.length > 0) {
                    if (startFromLeft) {
                        pathIndex = 0;
                    } else {
                        pathIndex = path.length - 1;
                    }
                    updateSquarePosition();
                    animationFrameId = requestAnimationFrame(gameLoop);
                }
            });

            resetBtn.addEventListener('click', resetGame);

            startLeftBtn.addEventListener('click', () => {
                startFromLeft = true;
                updateButtonStyles();
                if (animationFrameId) {
                    cancelAnimationFrame(animationFrameId);
                    updateSquarePosition();
                }
            });

            startRightBtn.addEventListener('click', () => {
                startFromLeft = false;
                updateButtonStyles();
                if (animationFrameId) {
                    cancelAnimationFrame(animationFrameId);
                    updateSquarePosition();
                }
            });

            sizeInput.addEventListener('input', () => {
                square.size = parseInt(sizeInput.value);
                drawPath();
                drawSquare();
            });

            window.addEventListener('resize', setupCanvas);

            // Initial setup
            setupCanvas();
            updateButtonStyles();
        });
    </script>
</body>
</html>
